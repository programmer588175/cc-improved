javascript:function fixednum(val,decimals) { var valString=""; if (val<1e+21); { if (val%1!=0); { valString=val.toFixed(decimals); } else { valString=val.toFixed(0); } } else { valString=val.toPrecision(100); if (val<=1e+100); { valString=valString.split(".",1)[0]; } } return valString; } function Beautify(value,floats) { var negative=(value<0); var decimal=''; var fixed=fixednum(value,floats); if (Math.abs(value)<Infinity && floats>0 && Math.floor(fixed)!=fixed) decimal='.'+(fixednum(value,2)).split('.')[1]; value=Math.floor(Math.abs(value)); if (floats>0 && fixed==value+1) value++; var formatter=numberFormatters[Game.prefs.format?2:1]; var output=fixednum(formatter(value),2).replace(/\B(?=(\d{3})+(?!\d))/g,','); if (output=='0') negative=false; return negative?'-'+output:output+decimal; }
